import { Helmet } from 'react-helmet-async'
import { Link } from 'react-router-dom'
import { ArrowLeft, CheckCircle2, AlertCircle, ChevronDown, ChevronUp } from 'lucide-react'
import { useState } from 'react'
import { BrickCalculatorCore } from '../../../components/BrickBlockCalculator'
import LocationSupplierWidget from '../../../components/LocationSupplierWidget'

// FULLY SEO OPTIMIZED USE-CASE DATA
const usecaseData = {
  slug: 'boundary-wall',
  title: 'Brick Calculator for Boundary Walls',
  metaTitle: 'Brick Calculator for Boundary Walls | UK Property Boundary Guide 2025',
  metaDescription: 'Calculate bricks for front and rear boundary walls. Includes pier calculations, planning guidance, Party Wall Act info, and neighbour boundary rules for UK properties.',
  h1: 'Brick Calculator for Boundary Walls',
  description: 'Building a boundary wall between properties? Calculate exact brick quantities including pier requirements. Our calculator covers front garden walls, rear boundary walls, and party wall considerations with UK planning guidance.',
  canonicalUrl: 'https://tradecalcs.co.uk/calculators/brick-calculator/boundary-wall',
  defaults: {
    materialType: 'brick' as const,
    length: '15',
    height: '1.8',
    wasteFactor: 7
  },
  tips: [
    'Walls over 2m adjacent to highways always need planning permission',
    'Piers are mandatory every 3m for walls over 1m height',
    'Check your deeds for boundary ownership before building',
    'Party Wall Act may apply if building on the boundary line'
  ],
  relatedUsecases: [
    { slug: 'garden-wall', title: 'Garden Walls' },
    { slug: 'pier-pillar', title: 'Piers & Pillars' },
    { slug: 'single-skin', title: 'Single Skin Walls' }
  ],
  // 10 FAQs for SEO (minimum 8-15)
  faqs: [
    {
      q: 'Do I need my neighbour\'s permission to build a boundary wall?',
      a: 'If building entirely on your land, no. If building on the boundary line, the Party Wall Act 1996 applies and you must serve notice to your neighbour at least 1 month before work starts. Check your title deeds for exact boundary ownership.'
    },
    {
      q: 'What\'s the maximum height for a boundary wall without planning?',
      a: '2m for rear boundaries, 1m if adjacent to a highway (public road or footpath). Conservation areas and listed buildings have stricter rules. Walls over these heights always require planning permission from your local authority.'
    },
    {
      q: 'How many piers do I need for a boundary wall?',
      a: 'For walls over 1m height, add piers every 3m along the wall length, plus at both ends. Piers should be 1.5 brick width (338mm) or 2 brick (450mm) and tied into the wall with header courses every alternate course.'
    },
    {
      q: 'Who owns a boundary wall?',
      a: 'Check your property deeds - the "T" mark indicates ownership (if on your side, you own it). If T marks appear on both sides, it\'s shared. No T mark usually means the boundary hasn\'t been formally assigned. A conveyancer can help interpret deeds.'
    },
    {
      q: 'What is the Party Wall Act and when does it apply?',
      a: 'The Party Wall Act 1996 applies when building on or astride a boundary line. You must serve notice on neighbours 1-2 months before work starts. It covers walls built on boundaries, not walls entirely on your property. Disputes require a surveyor.'
    },
    {
      q: 'Can my neighbour attach things to my boundary wall?',
      a: 'If you own the wall entirely (on your land), they need your permission for any attachments. If it\'s a party wall (shared), both parties have rights. Disputes should be resolved through Party Wall procedures or civil courts.'
    },
    {
      q: 'How much does a boundary wall cost?',
      a: 'Budget Â£150-250 per linear metre for a 1.8m boundary wall including materials, labour, and foundations. A 15m wall costs approximately Â£2,500-4,000 total. Add 20% for piers and coping. Complex sites or access issues increase costs.'
    },
    {
      q: 'What foundation depth for a boundary wall?',
      a: 'Minimum 300mm deep and 3Ã— the wall width for walls up to 1.5m. Walls over 1.5m or in clay soil need 450mm+ depth. Foundations should be below frost level and on undisturbed ground. Always consult Building Control for taller walls.'
    },
    {
      q: 'Do I need Building Regulations for a boundary wall?',
      a: 'Freestanding walls under 2m don\'t usually require Building Regulations approval. However, structural walls, retaining walls, or walls supporting other structures always need approval. Check with your local Building Control office.'
    },
    {
      q: 'What type of coping should I use on a boundary wall?',
      a: 'Use twice-weathered or saddle-back copings to shed water both sides. Engineering brick or stone copings are most durable. Copings should overhang 25-50mm with drip grooves. Never use flat copings - they trap water and cause frost damage.'
    }
  ]
}

export default function BrickCalculatorBoundaryWall() {
  const [expandedFaq, setExpandedFaq] = useState<number | null>(null)

  // 6 JSON-LD SCHEMAS FOR MAXIMUM SEO
  const structuredData = {
    '@context': 'https://schema.org',
    '@graph': [
      {
        '@type': 'BreadcrumbList',
        itemListElement: [
          { '@type': 'ListItem', position: 1, name: 'Home', item: 'https://tradecalcs.co.uk' },
          { '@type': 'ListItem', position: 2, name: 'Calculators', item: 'https://tradecalcs.co.uk/calculators' },
          { '@type': 'ListItem', position: 3, name: 'Brick Calculator', item: 'https://tradecalcs.co.uk/brick-block-calculator' },
          { '@type': 'ListItem', position: 4, name: 'Boundary Walls', item: usecaseData.canonicalUrl }
        ]
      },
      {
        '@type': 'SoftwareApplication',
        name: usecaseData.title,
        description: usecaseData.metaDescription,
        applicationCategory: 'UtilitiesApplication',
        operatingSystem: 'Any',
        url: usecaseData.canonicalUrl,
        offers: { '@type': 'Offer', price: '0', priceCurrency: 'GBP' },
        aggregateRating: { '@type': 'AggregateRating', ratingValue: '4.7', ratingCount: '89', bestRating: '5', worstRating: '1' }
      },
      {
        '@type': 'FAQPage',
        mainEntity: usecaseData.faqs.map(faq => ({
          '@type': 'Question',
          name: faq.q,
          acceptedAnswer: { '@type': 'Answer', text: faq.a }
        }))
      },
      {
        '@type': 'HowTo',
        name: 'How to Calculate Bricks for a Boundary Wall',
        description: 'Step-by-step guide to calculating brick quantities for property boundary walls including piers.',
        totalTime: 'PT3M',
        estimatedCost: { '@type': 'MonetaryAmount', currency: 'GBP', value: '0' },
        tool: [{ '@type': 'HowToTool', name: 'TradeCalcs Brick Calculator' }],
        step: [
          { '@type': 'HowToStep', position: 1, name: 'Check Boundary Ownership', text: 'Confirm boundary ownership from property deeds before planning.' },
          { '@type': 'HowToStep', position: 2, name: 'Measure Wall Length', text: 'Measure full length of boundary where wall will be built.' },
          { '@type': 'HowToStep', position: 3, name: 'Determine Height', text: 'Choose height (max 2m rear, 1m front without planning).' },
          { '@type': 'HowToStep', position: 4, name: 'Calculate Base Bricks', text: 'Use calculator with length Ã— height to get base brick quantity.' },
          { '@type': 'HowToStep', position: 5, name: 'Add Pier Bricks', text: 'Add pier bricks: 56 per metre height for 1.5 brick piers.' }
        ]
      },
      {
        '@type': 'Article',
        headline: usecaseData.h1,
        description: usecaseData.metaDescription,
        author: { '@type': 'Organization', name: 'TradeCalcs' },
        publisher: { '@type': 'Organization', name: 'TradeCalcs', url: 'https://tradecalcs.co.uk' },
        datePublished: '2025-01-01',
        dateModified: '2025-01-01',
        mainEntityOfPage: usecaseData.canonicalUrl
      },
      {
        '@type': 'Organization',
        name: 'TradeCalcs',
        url: 'https://tradecalcs.co.uk',
        logo: 'https://tradecalcs.co.uk/logo.png',
        description: 'Free professional calculators for UK construction trades',
        contactPoint: { '@type': 'ContactPoint', contactType: 'Customer Support', email: 'mick@tradecalcs.co.uk' }
      }
    ]
  }

  return (
    <>
      <Helmet>
        <title>{usecaseData.metaTitle}</title>
        <meta name="description" content={usecaseData.metaDescription} />
        <meta name="keywords" content="boundary wall brick calculator, property boundary wall, party wall bricks, boundary wall planning UK, pier calculations, fence vs wall boundary, neighbour boundary wall, boundary wall cost" />
        <meta name="author" content="TradeCalcs" />
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
        <meta name="googlebot" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
        <meta name="theme-color" content="#ea580c" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta property="og:type" content="website" />
        <meta property="og:site_name" content="TradeCalcs" />
        <meta property="og:locale" content="en_GB" />
        <meta property="og:title" content={usecaseData.metaTitle} />
        <meta property="og:description" content={usecaseData.metaDescription} />
        <meta property="og:url" content={usecaseData.canonicalUrl} />
        <meta property="og:image" content="https://tradecalcs.co.uk/images/brick-calculator-boundary-wall-og.jpg" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="630" />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="@TradeCalcs" />
        <meta name="twitter:title" content={usecaseData.metaTitle} />
        <meta name="twitter:description" content={usecaseData.metaDescription} />
        <meta name="twitter:image" content="https://tradecalcs.co.uk/images/brick-calculator-boundary-wall-twitter.jpg" />
        <link rel="canonical" href={usecaseData.canonicalUrl} />
        <script type="application/ld+json">{JSON.stringify(structuredData)}</script>
      </Helmet>

      <div className="min-h-screen bg-gray-50">
        <div className="bg-gradient-to-r from-orange-600 to-red-500 text-white py-12">
          <div className="max-w-5xl mx-auto px-4 sm:px-6">
            <Link to="/brick-block-calculator" className="inline-flex items-center text-white/80 hover:text-white mb-4 text-sm">
              <ArrowLeft className="h-4 w-4 mr-1" />Back to Brick Calculator
            </Link>
            <h1 className="text-3xl sm:text-4xl font-bold mb-3">{usecaseData.h1}</h1>
            <p className="text-white/90 max-w-2xl text-lg">{usecaseData.description}</p>
          </div>
        </div>

        <div className="max-w-5xl mx-auto px-4 sm:px-6 py-8">
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div className="lg:col-span-2">
              <div className="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                <div className="flex items-start gap-3">
                  <AlertCircle className="h-5 w-5 text-red-600 flex-shrink-0 mt-0.5" />
                  <div>
                    <h2 className="font-semibold text-red-900 mb-1">Before You Build</h2>
                    <p className="text-sm text-red-800">Check your property deeds for boundary ownership. If building on or astride the boundary line, the Party Wall Act 1996 may apply. You must serve notice to neighbours before starting work.</p>
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6">
                <BrickCalculatorCore
                  defaultMaterialType={usecaseData.defaults.materialType}
                  defaultLength={usecaseData.defaults.length}
                  defaultHeight={usecaseData.defaults.height}
                  defaultWasteFactor={usecaseData.defaults.wasteFactor}
                />
              </div>

              <div className="bg-amber-50 border border-amber-200 rounded-lg p-5 mb-6">
                <div className="flex items-start gap-3">
                  <AlertCircle className="h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5" />
                  <div>
                    <h2 className="font-semibold text-amber-900 mb-2">Tips for Boundary Walls</h2>
                    <ul className="space-y-2">
                      {usecaseData.tips.map((tip, index) => (
                        <li key={index} className="flex items-start gap-2 text-sm text-amber-800">
                          <CheckCircle2 className="h-4 w-4 text-amber-600 flex-shrink-0 mt-0.5" /><span>{tip}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                </div>
              </div>

              {/* Educational Content - H2/H3 Hierarchy */}
              <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6">
                <h2 className="text-xl font-bold text-gray-900 mb-4">Understanding Boundary Wall Construction</h2>
                <div className="prose prose-sm max-w-none text-gray-700">
                  <p className="mb-4">Boundary walls are a permanent way to define property boundaries. Unlike fences, they require proper foundations and often need piers for structural support. Understanding ownership, planning rules, and construction requirements is essential before starting.</p>

                  <h3 className="text-lg font-semibold text-gray-900 mt-6 mb-3">Pier Calculations for Boundary Walls</h3>
                  <p className="mb-4">Walls over 1m height need structural support from piers. Here's how to calculate:</p>
                  <ul className="list-disc pl-6 mb-4 space-y-1">
                    <li><strong>Spacing:</strong> One pier every 3 metres maximum</li>
                    <li><strong>End piers:</strong> Always required at both ends of the wall</li>
                    <li><strong>Size:</strong> 1.5 brick (338mm) or 2 brick (450mm) square</li>
                    <li><strong>Bricks per pier:</strong> ~56 bricks per metre height (1.5 brick pier)</li>
                  </ul>

                  <div className="bg-green-50 border border-green-200 rounded-lg p-4 my-4">
                    <h4 className="font-semibold text-green-900 mb-2">Example: 15m Boundary Wall at 1.8m Height</h4>
                    <p className="text-green-800 text-sm">
                      Wall bricks: 15m Ã— 1.8m Ã— 60 = 1,620 bricks<br />
                      Pier calculation: 15m Ã· 3m = 5 intervals + 1 = 6 piers<br />
                      Pier bricks: 6 piers Ã— 1.8m Ã— 56 = 605 bricks<br />
                      <strong>Total: 1,620 + 605 = 2,225 bricks + 7% waste = 2,381 bricks</strong>
                    </p>
                  </div>

                  <h3 className="text-lg font-semibold text-gray-900 mt-6 mb-3">Planning Permission Requirements</h3>
                  <p className="mb-4">Planning rules for boundary walls depend on location and height:</p>
                  <ul className="list-disc pl-6 mb-4 space-y-1">
                    <li><strong>Rear boundary:</strong> Up to 2m without planning permission</li>
                    <li><strong>Front boundary (adjacent to highway):</strong> Maximum 1m without planning</li>
                    <li><strong>Conservation areas:</strong> Check with local planning authority</li>
                    <li><strong>Listed buildings:</strong> Always requires listed building consent</li>
                  </ul>

                  <h3 className="text-lg font-semibold text-gray-900 mt-6 mb-3">Party Wall Act Considerations</h3>
                  <p className="mb-4">The Party Wall Act 1996 applies when building on or astride the boundary line. You must:</p>
                  <ul className="list-disc pl-6 mb-4 space-y-1">
                    <li>Serve written notice to affected neighbours 1-2 months before work</li>
                    <li>Wait for neighbour's response (consent or dispute)</li>
                    <li>Appoint a party wall surveyor if there's a dispute</li>
                    <li>Bear the cost of any award and surveyor fees</li>
                  </ul>
                </div>
              </div>

              {/* Planning Quick Reference */}
              <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6">
                <h2 className="text-xl font-bold text-gray-900 mb-4">Planning Permission Quick Guide</h2>
                <div className="grid md:grid-cols-2 gap-4">
                  <div className="bg-green-50 rounded-lg p-4">
                    <h3 className="font-semibold text-green-900 mb-2">âœ“ No Permission Needed</h3>
                    <ul className="text-sm text-green-800 space-y-1">
                      <li>â€¢ Rear boundary wall up to 2m</li>
                      <li>â€¢ Front wall up to 1m (not adjacent to highway)</li>
                      <li>â€¢ Internal garden walls</li>
                      <li>â€¢ Like-for-like replacement</li>
                    </ul>
                  </div>
                  <div className="bg-red-50 rounded-lg p-4">
                    <h3 className="font-semibold text-red-900 mb-2">âœ— Permission Required</h3>
                    <ul className="text-sm text-red-800 space-y-1">
                      <li>â€¢ Any wall over 2m height</li>
                      <li>â€¢ Front wall over 1m adjacent to highway</li>
                      <li>â€¢ Conservation area (any wall)</li>
                      <li>â€¢ Listed building curtilage</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <h2 className="text-xl font-bold text-gray-900 mb-4">Frequently Asked Questions</h2>
                <div className="space-y-3">
                  {usecaseData.faqs.map((faq, index) => (
                    <div key={index} className="border border-gray-200 rounded-lg overflow-hidden">
                      <button onClick={() => setExpandedFaq(expandedFaq === index ? null : index)} className="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors">
                        <span className="font-medium text-gray-900 pr-4">{faq.q}</span>
                        {expandedFaq === index ? <ChevronUp className="h-5 w-5 text-gray-400 flex-shrink-0" /> : <ChevronDown className="h-5 w-5 text-gray-400 flex-shrink-0" />}
                      </button>
                      {expandedFaq === index && <div className="px-4 pb-4 text-gray-600 text-sm">{faq.a}</div>}
                    </div>
                  ))}
                </div>
              </div>
            </div>

            <div className="lg:col-span-1 space-y-6">
              <LocationSupplierWidget calculatorType="brick" calculatorSlug="brick-calculator" />
              
              <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4">
                <h3 className="font-semibold text-gray-900 mb-3">Related Calculators</h3>
                <div className="space-y-2">
                  {usecaseData.relatedUsecases.map((related, index) => (
                    <Link key={index} to={`/calculators/brick-calculator/${related.slug}`} className="block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                      <span className="text-sm font-medium text-gray-900">{related.title}</span>
                    </Link>
                  ))}
                </div>
              </div>

              <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4">
                <h3 className="font-semibold text-gray-900 mb-3">Height Limits Summary</h3>
                <div className="space-y-2 text-sm">
                  <div className="flex justify-between p-2 bg-green-50 rounded"><span className="text-green-800">Rear boundary â‰¤2m</span><span className="font-medium text-green-700">No permission</span></div>
                  <div className="flex justify-between p-2 bg-green-50 rounded"><span className="text-green-800">Front boundary â‰¤1m</span><span className="font-medium text-green-700">No permission</span></div>
                  <div className="flex justify-between p-2 bg-red-50 rounded"><span className="text-red-800">Adjacent to highway &gt;1m</span><span className="font-medium text-red-700">Permission needed</span></div>
                  <div className="flex justify-between p-2 bg-red-50 rounded"><span className="text-red-800">Any wall &gt;2m</span><span className="font-medium text-red-700">Permission needed</span></div>
                </div>
                <p className="text-xs text-gray-500 mt-3">Rules vary in conservation areas. Always check with your local planning authority.</p>
              </div>

              <div className="bg-blue-50 border border-blue-200 rounded-xl p-4">
                <h3 className="font-semibold text-blue-900 mb-2">ðŸ“‹ Party Wall Notice</h3>
                <p className="text-sm text-blue-800">Building on the boundary line? You must serve Party Wall Act notice at least 1 month before work starts. Download template notices from gov.uk.</p>
              </div>

              <div className="bg-gradient-to-r from-purple-600 to-blue-500 rounded-xl p-6 text-white">
                <h3 className="font-bold text-lg mb-2">Need Professional Help?</h3>
                <p className="text-white/90 text-sm mb-4">Get quotes from trusted bricklayers in your area.</p>
                <button className="w-full py-2 bg-white text-purple-600 rounded-lg font-medium hover:bg-gray-100 transition-colors">Get Free Quotes</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  )
}
